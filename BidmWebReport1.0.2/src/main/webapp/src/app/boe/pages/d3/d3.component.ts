import { Component, OnInit } from '@angular/core';

import * as d3 from 'd3';

@Component({
  selector: 'app-d3',
  templateUrl: './d3.component.html',
  styleUrls: ['./d3.component.css']
})
export class D3Component implements OnInit {

  constructor() { }

  ngOnInit() {
    const svg = d3.select("svg");
    svg.attr("width", "100%");
    svg.attr("height", "600px");
    svg.attr("padding-left", "20px");

    const designPoints = [
      [10, 25], [80, 25], [150, 25], [220, 25], [290, 25], 
      [295, 25], [365, 25], [425, 25], [495, 25], [565, 25],
      [10, 75], [150, 75], [290, 75], [295, 75], [425, 75], [565, 75],
      [10, 125], [150, 125], [290, 125], [295, 125], [425, 125], [565, 125],
      [10, 175], [80, 175], [150, 175], [220, 175], [290, 175], 
      [295, 175], [365, 175], [425, 175], [495, 175], [565, 175],
      [10, 175], [80, 175], [150, 175], [220, 175], [290, 175], 
      [295, 175], [365, 175], [425, 175], [495, 175], [565, 175],
      [10, 225], [150, 225], [290, 225], [295, 225], [425, 225], [565, 225],
      [10, 275], [150, 275], [290, 275], [295, 275], [425, 275], [565, 275],
      [10, 325], [80, 325], [150, 325], [220, 325], [290, 325], 
      [295, 325], [365, 325], [425, 325], [495, 325], [565, 325]
    ];

    let pathD = "M 10 25 L 80 25 L 150 25 L 220 25 L 290 25";
    pathD += " L 295 25 L 365 25 L 425 25 L 495 25 L 565 25";
    pathD += " M 10 25 L 10 75 L 10 125 L 10 175";
    pathD += " M 150 25 L 150 75 L 150 125 L 150 175";
    pathD += " M 290 25 L 290 75 L 290 125 L 290 175";
    pathD += " M 295 25 L 295 75 L 295 125 L 295 175";
    pathD += " M 425 25 L 425 75 L 425 125 L 425 175";
    pathD += " M 565 25 L 565 75 L 565 125 L 565 175";
    pathD += " M 10 175 L 80 175 L 150 175 L 220 175 L 290 175";
    pathD += " L 295 175 L 365 175 L 425 175 L 495 175 L 565 175";
    pathD += " M 10 175 L 80 175 L 150 175 L 220 175 L 290 175";
    pathD += " L 295 175 L 365 175 L 425 175 L 495 175 L 565 175";
    pathD += " M 10 175 L 10 225 L 10 275 L 10 325";
    pathD += " M 150 175 L 150 225 L 150 275 L 150 325";
    pathD += " M 290 175 L 290 225 L 290 275 L 290 325";
    pathD += " M 295 175 L 295 225 L 295 275 L 295 325";
    pathD += " M 425 175 L 425 225 L 425 275 L 425 325";
    pathD += " M 565 175 L 565 225 L 565 275 L 565 325";
    pathD += " M 10 325 L 80 325 L 150 325 L 220 325 L 290 325";
    pathD += " L 295 325 L 365 325 L 425 325 L 495 325 L 565 325";

    const measurePoints = [
      [6, 20], [77, 22], [146, 23], [216, 20], [286, 18], 
      [297, 19], [367, 23], [427, 23], [498, 22], [564, 17],
      [4, 72], [146, 72], [288, 72], [291, 72], [426, 71], [566, 71],
      [2, 125], [146, 124], [288, 125], [295, 125], [427, 123], [567, 123],
      [4, 177], [75, 175], [145, 173], [218, 175], [285, 175], 
      [300, 175], [370, 176], [430, 175], [500, 175], [568, 174],
      [12, 177], [86, 178], [155, 180], [227, 176], [295, 175], 
      [300, 175], [370, 175], [431, 177], [500, 175], [569, 175],
      [8, 228], [152, 227], [297, 227], [298, 227], [429, 226], [570, 224],
      [8, 282], [153, 279], [298, 279], [299, 278], [432, 277], [572, 278],
      [10, 333], [78, 331], [150, 328], [223, 328], [292, 329], 
      [305, 329], [375, 327], [433, 327], [502, 327], [572, 327]
    ];

    let pathDM = "M 6 20 L 77 22 L 146 23 L 216 20 L 286 18";
    pathDM += " L 297 19 L 367 23 L 427 23 L 498 22 L 564 17";
    pathDM += " M 6 20 L 4 72 L 2 125 L 4 177";
    pathDM += " M 146 23 L 146 72 L 146 124 L 145 173";
    pathDM += " M 286 18 L 288 72 L 288 125 L 285 175";
    pathDM += " M 297 19 L 291 72 L 295 125 L 300 175";
    pathDM += " M 427 23 L 426 71 L 427 123 L 430 175";
    pathDM += " M 565 17 L 566 71 L 567 123 L 568 174";
    pathDM += " M 4 177 L 75 175 L 145 173 L 218 175 L 285 175";
    pathDM += " L 300 175 L 370 176 L 430 175 L 500 175 L 568 174";
    pathDM += " M 12 177 L 86 178 L 155 180 L 227 176 L 295 175";
    pathDM += " L 300 175 L 370 175 L 431 177 L 500 175 L 569 175";
    pathDM += " M 12 177 L 8 228 L 8 282 L 10 333";
    pathDM += " M 155 180 L 152 227 L 153 279 L 150 328";
    pathDM += " M 295 175 L 297 227 L 298 279 L 292 329";
    pathDM += " M 300 175 L 298 227 L 299 278 L 305 329";
    pathDM += " M 431 177 L 429 226 L 432 277 L 433 327";
    pathDM += " M 569 175 L 570 224 L 572 278 L 572 327";
    pathDM += " M 10 333 L 78 331 L 150 328 L 223 328 L 292 329";
    pathDM += " L 305 329 L 375 327 L 433 327 L 502 327 L 572 327";

    designPoints.forEach(point => {
      svg.append("circle")
        .attr("cx", point[0])
        .attr("cy", point[1])
        .attr("r", 3)
        .attr("fill", "#4F81BD");
    });

    svg.append("path").attr("d", pathD)
      .attr("stroke", "#4F81BD").attr("stroke-width", "2")
      .attr("fill", "none");

    measurePoints.forEach(point => {
      svg.append("circle")
        .attr("cx", point[0])
        .attr("cy", point[1])
        .attr("r", 3)
        .attr("fill", "#C0504D");
    });

    svg.append("path").attr("d", pathDM)
      .attr("stroke", "#C0504D").attr("stroke-width", "2")
      .attr("fill", "none");
  }

}
